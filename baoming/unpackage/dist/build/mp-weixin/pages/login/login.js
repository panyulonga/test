(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{1239:function(t,e,a){"use strict";a.r(e);var n=a("4405"),o=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,(function(){return n[t]}))}(i);e["default"]=o.a},4405:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(a("95d2"));function o(t){return t&&t.__esModule?t:{default:t}}var i={data:function(){return{title:"Hello",top_style:"",top_height:"",platforms:"",jump_info:""}},onLoad:function(e){this.platforms=t.getSystemInfoSync().platform,console.log(t.getMenuButtonBoundingClientRect());var a=t.getMenuButtonBoundingClientRect(),n=(a.height-40)/2;this.top_height="height:"+(a.top+n)+"px",this.top_style="top:"+(a.top+n)+"px",console.log(e),this.jump_info=e.jump,console.log(this.jump_info)},methods:{imreturn:function(){t.navigateBack()},appLoginWx:function(){var e=this;t.getProvider({service:"oauth",success:function(a){~a.provider.indexOf("weixin")&&t.getUserInfo({provider:"weixin",success:function(o){t.setStorage({key:"userInfoes",data:o.userInfo});var i=o.userInfo.avatarUrl,c=o.userInfo.nickName;t.login({provider:"weixin",success:function(o){var s=o.code;t.request({url:n.default.WEBSITE_URL+"/api/member/unifyLogin/platform/"+n.default.CHANNEL+"?",data:{code:s},success:function(o){if(0==o.data.code){var s=o.data.data.token;t.setStorage({key:"names",data:o.data.data}),t.request({url:n.default.WEBSITE_URL+"/api/member/updateUserInfo/platform/"+n.default.CHANNEL+"?token="+s,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",data:{nickname:c,avatar:i},success:function(o){0==o.data.code?(t.hideLoading(),t.showToast({title:"登录成功",icon:"none"}),t.setStorage({key:"type",data:""}),e.jump_info?t.request({method:"POST",url:n.default.WEBSITE_URL+"/api/competition/getRegistration?token="+s+"&channel="+n.default.CHANNEL,success:function(e){console.log(e.data,Object.keys(e.data.data).length),0==e.data.code&&(e.data.data.length>0||Object.keys(e.data.data).length>0)?(t.showToast({icon:"none",title:"已报名，正在前往作品界面"}),t.request({url:n.default.WEBSITE_URL+"/api/competition/getAllSubmission?token="+s+"&channel="+n.default.CHANNEL,success:function(e){0==e.data.code&&(e.data.data.article.length>0?t.setStorageSync("type","article"):e.data.data.miniapp.length>0?t.setStorageSync("type","miniapp"):e.data.data.video.length>0&&t.setStorageSync("type","video"),console.log(t.getStorageSync("type","data"))),setTimeout((function(){t.navigateTo({url:"/pages/sign_info/sign_info?type=".concat(t.getStorageSync("type","data"))})}),1e3)}})):setTimeout((function(){t.navigateBack()}),1e3)}}):setTimeout((function(){t.navigateBack()}),1e3)):t.showToast({title:a.data.msg,icon:"none"})}})}}})}})}})}})},getUserInfos:function(){var e=this;t.getUserProfile({desc:"展示用户信息",success:function(a){t.showLoading({title:"正在登录"}),t.setStorage({key:"userInfoes",data:a.userInfo});var o=a.userInfo.avatarUrl,i=a.userInfo.nickName;t.login({provider:"weixin",success:function(c){var s=c.code;t.request({url:n.default.WEBSITE_URL+"/api/member/unifyLogin/platform/"+n.default.CHANNEL+"?",data:{code:s},success:function(c){if(0==c.data.code){var s=c.data.data.token;t.setStorage({key:"names",data:c.data.data}),t.request({url:n.default.WEBSITE_URL+"/api/member/updateUserInfo/platform/"+n.default.CHANNEL+"?token="+s,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",data:{nickname:i,avatar:o},success:function(o){0==o.data.code?(t.hideLoading(),t.showToast({title:"登录成功",icon:"none"}),t.setStorage({key:"type",data:""}),0==o.data.code?(t.hideLoading(),t.showToast({title:"登录成功",icon:"none"}),t.setStorage({key:"type",data:""}),e.jump_info?t.request({method:"POST",url:n.default.WEBSITE_URL+"/api/competition/getRegistration?token="+s+"&channel="+n.default.CHANNEL,success:function(e){console.log(e.data,Object.keys(e.data.data).length),0==e.data.code&&(e.data.data.length>0||Object.keys(e.data.data).length>0)?(t.showToast({icon:"none",title:"已报名，正在前往作品界面"}),t.request({url:n.default.WEBSITE_URL+"/api/competition/getAllSubmission?token="+s+"&channel="+n.default.CHANNEL,success:function(e){0==e.data.code&&(e.data.data.article.length>0?t.setStorageSync("type","article"):e.data.data.miniapp.length>0?t.setStorageSync("type","miniapp"):e.data.data.video.length>0&&t.setStorageSync("type","video"),console.log(t.getStorageSync("type","data"))),setTimeout((function(){t.navigateTo({url:"/pages/sign_info/sign_info?type=".concat(t.getStorageSync("type","data"))})}),1e3)}})):setTimeout((function(){t.navigateBack()}),1e3)}}):setTimeout((function(){t.navigateBack()}),1e3)):t.showToast({title:a.data.msg,icon:"none"})):t.showToast({title:a.data.msg,icon:"none"})}})}}})}})},fail:function(e){t.showToast({title:"用户拒绝",icon:"none"})}})}}};e.default=i}).call(this,a("543d")["default"])},7914:function(t,e,a){"use strict";a.r(e);var n=a("e773"),o=a("1239");for(var i in o)"default"!==i&&function(t){a.d(e,t,(function(){return o[t]}))}(i);a("f566");var c,s=a("f0c5"),u=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],c);e["default"]=u.exports},"8dd5":function(t,e,a){},a90c:function(t,e,a){"use strict";(function(t){a("9f11");n(a("66fd"));var e=n(a("7914"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},e773:function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement;t._self._c},i=[]},f566:function(t,e,a){"use strict";var n=a("8dd5"),o=a.n(n);o.a}},[["a90c","common/runtime","common/vendor"]]]);